var MongoClient = require('mongodb').MongoClient;
var assert = require('assert');
var ObjectId = require('mongodb').ObjectID;
var url = 'mongodb://localhost:27017/posts';
var getnews = function(callback){
	MongoClient.connect(url, function(err, db){
		var posts = db.collection('postcon').find().sort({time_added:-1});
			posts.toArray(function(err, docs) {
			    assert.equal(err, null);
			    console.log("Found the following records");
			    //console.dir(docs);
			    //res.status(200).render('newspost', {newspost:docs, title:'New Posts'});
			    callback(docs);
			  });
	});
}

module.exports = getnews;